# 4주차

    TIP
    어려운데 굉장히 중요한 부분이라고 한다

## 프로세스의 정의 

+ 1960년대 멀릭스 운영체제에서 처음 사용
+ IBM 운영체제에서의 작업
+ 실행중인 프로그램
+ 비동기적 행위
+ 실행중인 프로시저
+ 실행중인 프로시저의 제어 추적
+ 운영체제에 들어 있는 프로세스 제어 블록[PCB]
+ 프로세서에 할당하여 실행할 수 있는 개체 디스패치가 가능한 대상

_

    TIP
    프로그램이 메모리로 적재되면 프로세스가 됨

## 프로세스의 일반적 메모리구조

+ 독립적 실행
    + 명령어가 순차적으로 실행되는 것

![메모리 구조](./개인연구소/resource/memory_location.png)

## 코드 영역
실행 할 프로그램의 코드가 저장되는 공간으로 CPU는 이 영역에 저장된 명령문을 가져간다
## 데이터 영역
전역변수와 static변수가 할당된다 

이 영역에 할당되는 변수들은 시작과 동시에 메모리 공간에 할당되며 프로그램이 종료할 때 까지 남아있는다
## 스택 영역

지역변수와 매개변수가 할당된다

이 영역에 할당된 변수는 선언된 위치의 함수를 빠져나갈 경우 소멸된다

## 힙 영역

알고리즘을 짜다보면 프로그래머가 원하는 시점에 변수를 할당하고 해제하고 싶을 때가 있다(주로 malloc과 free를 사용할 때)

이 경우에 변수가 할당되는 영역이 힙 영역이다

---

## 시스템 관점에서의 프로세스

알아보기 [이건 조사해보자]

## 프로세스의 종류

+ 역할

    + 시스템(커널) 프로세스

        + 모든 시스템 메모리와 프로세서의 명령에 엑세스 할 수 있는 프로세스이다.
        + 프로세스 실행 순서를 제어하거나 다른 사용자 및 커널운영체제 영역을 침범하지 못하게 감시하고, 사용자 프로세스를 생성하는 기능을 한다.

    + 사용자 프로세스

        + 사용자 코드를 수행하는 프로세스이다.

+ 병행 수행방법

    + 독립 프로세스

        + 다른 프로세서에 영향을 주지 않거나, 다른 프로세스의 영향을 받지 않으면서 수행함

    + 협력 프로세스

        + 다른 프로세스에 영향을 주거나 영향을 받으면서 수행함

---

    사용자 모드 -> 커널 모드로 변환할 때 보안 인증을함


## 프로세스의 상태 변화

    시험에 나온다 책에서 정확하게 외워놓자
    (해당 이미지가 있음)

## 프로세스의 상태 변화와 상태 정보

+ 프로세스의 상태 변화는 운영체제가 프로세서 스케줄러 이용하여 관리
+ 작업 스케줄러는 스플러가 디스크에 저장한 작업 중 실행할 작업 선정하고 준비 리스트에 삽입하여 다중 프로그래밍의 정도 결정
+ 프로세스 스케줄러는 선정한 작업의 상태를 변화시키며 프로세스의 생성에서 종료까지 과정 수행

스케줄링, 스케줄러 : 운영체제가 프로세스를 관리하는 정책

+ 문맥교환 알아보기

_

    TIP
    정말로 중요한 부분이다
    책을보면서 100번 외워두자


### 3가지 상태
+ 실행
+ 준비
+ 대기

상상도 못할정도로 빨라서 멀티태스킹이 가능함

+ 멀티태스킹 : 동시에 수행하는것처럼 보이게 존나 빠르다

+ 멀티프로그램이 확장된게 멀티태스킹

+ 모두 동적인 프로세서를 장착함

### 우선순위스케줄러, 라운드스케줄러

+ 준비 -> 실행

    dispatch

+ 실행 -> 준비

    timeout

+ 실행 -> 대기

    block

+ 대기 -> 준비

    wakeup

### 프로세스 문맥교환

+ 실행 중인 프로세스의 제어를 다른 프로세스에 넘겨 실행 상태가 되도록 하는것
+ 프로세스 문맥 교환이 일어나면 프로세서의 레지스터에 있던 내용 저장

![프로세스 문맥교환](./개인연구소/resource/process_2.png)


## 프로세스의 구조

## 프로세스의 생성 시기

## 프로세스 생성시 필요한 세부 작업 순서

## 프로세스가 새로운 프로세스 생성 시 다음 두 가지 실행 발생

+ 부모 프로세스와 자식 프로세스 동시 실행
+ 부모 프로세스는 자식 프로세스 모두 종료할 때까지 대기
+ 프로세스를 부모 프로세스가 띄우는 트리구조

## 프로세스 제거

+ 프로세스 파괴

## 프로세스 중단
 
+ 시스템의 유휴시간 문제를 프로세스 중단(일시정지) 상태를 이용 해결
+ 중단한 프로세스는 중단한 지점부터 다시 시작
+ 다중 프로그래밍에서 중단
+ 다중 처리 시스템, 다른 프로세서가 실행 중인 프로세스 중단
+ 중단된 프로세스는 다른 프로세서가 재시작 하기전에 실행 불가
+ 하 존나 많음(나머지는 책으로 보면됨)

## 프로세스 스케줄러

+ 이것도 책으로 보셈(너무 많아서 적다가 놓쳐버림)

## 프로세스의 문맥 교환 발생

+ 3가지
    + 인터럽트가 발생하게되면 별도로 외부에서 이벤트가 발생함
        + ex) 입출력 동작의 종료
        + 인터럽트의 종류로는 입출력 인터럽트, 클록인터럽트가 있음
        + 꼭알아둬야할 것(자세하게 알아야함)

            입출력

                입출력 동작이 발생확인, 
                이벤트 기다리는 프로세스를 준비상태로 바꾼 후 실행할 프로세스 결정

            클록

                실행 중인 프로세스 할당 시간 조사, 준비 상태로 바꾸고, 다른 프로세스를 실행상태로 전환

    + 대개 이전 프로세스의 상태 내용 보관하고 다른 프로세스의 레지스터 적재하여 프로세스를 교환

        + 문맥교환에서 오버헤드가 발생하는데

            + 오버헤드

                구지 지급하지않아도 되는데 명령이나 프로세스에 있어서 어쩔 수 없이 실행 될 수 밖에 없는 낭비되는 시간을 뜻함

## 스레드의 개념

    일단 개중요하다

+ 프로세스의 특성인 자원과 제어에서 제어만 분리한 실행 단위

+ 프로세스 하나는 스레드 한 개 이상으로 나눌 수 있음

+ 프로세스의 직접 실행 정보를 제외한 나머지 프로세스 관리 정보 공유

+ 다른 프로시저 호출, 다른 실행 기록(별도 스택 필요)

+ 관련 자원과 함께 메모리 공유 가능하므로 손상된 데이터나 스레드의 이상 동작 고려

+ 경량 프로세스: 프로세스 속성 중 일부가 들어 있는 것

+ 중량 프로세스: 스레드 하나에 프로세스 하나만 전통적인 경우

+ 같은 프로세스의 스레드들은 동일한 주소 공유

+ 프로세스 내에서 실행단위가 스레드

+ 메인 스레드 공부하기

_

    [Process]
           [Thread구조]
                T1[[stack]-[TLS]-[TCB]]
        [HEAP]--T2[[stack]-[TLS]-[TCB]]
        [DATA]  T3[[stack]-[TLS]-[TCB]] <<--스레드만의 영역
        [CODE]
           [/Thread 구조]
    [/Process]

+ 스레드의 장점 알아두기

---

+ SP : 스택 포인터
+ SR : 순서열 레지스터 
+ PC : 프로그램 카운터

---
+ 스레드의 병렬 수행

    + 프로세스 하나에 포함된 스레드들은 공동의 목적 달성을 위해 병렬 수행
    + 프로세스가 하나인 서로 다른 프로세서에서 프로그램의 다른 부분 동시 실행

+ 스레드 병렬 수행의 이점

    + 사용자 응답성 증가
    + 프로세스의 자원과 메모리 공유 기능
    + 경제성 좋음
    + 다중처리로 성능향상

---
## 다중 스레드 공부하기

## 혼합형 스레드 공부하기

## 스레드의 특징 공부하기
    

        