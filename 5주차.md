# 병행 프로세스와 상호배제

    일단 병렬과 병행은 다르다

## 목차

1. 병행 프로세스
2. 상호배제와 동기화
3. 상호배제 방법들

---
## 병행 프로세스

+ ### 개념

    + 운영체제가 프로세서를 빠르게 전환, 프로세서  시간 나눠 마치 프로세스 여러 개를 동시에 실행하는 것처럼 보이게 하는 것

    + 메모리에는 프로세스끼리 공유하는 영역이 있음

+ ### 종류

    + 독립 프로세스

        + 단일 처리 시스템에서 수행하는 병행 프로세스, 다른 프로세스에 영향 주고 받지 않으면서 독립 실행
        + 다른 프로세스, 데이터와 상태 공유 많고 동작도 재현 가능
        + 주어진 조건값에 따라 항상 동일한 결과
        + 중지 후 변동 없이 다시 시작 가능
        + 독립 실행할 수 있는 프로세스
        
            + 단일 프로그래밍
                + 프로세스 한놈만 사용
            + 다중 프로그래밍
                + 프로세스 여러개를 프로세서 하나의 공유, 공유하지 않는 상태일 때 디스패치(실행순서)순서 상관없음
            + 다중 처리
                + 프로세서 2개 이상 사용하여 동시에 프로그램 여러 개를 병렬(병행) 실행
    
    + 협력 프로세스

        + 다른 프로세스와 상호작용하며 특정 기능 수행하는 비동기적 프로세스
        + 프로세스와의 상호작용이 필요하다 <<--- 이부분이 굉장히 중요하다

## 병행프로세스의 해결 과제

+ 병행성

    + 여러 프로세스를 이용하여 작업을 수행하는 것
    + 시스템 신뢰도 높이고 처리 속도 개선, 처리 능력 높이는데 필요

+ 병행프로세스의 문제

    + 공유 자원 상호 베타적 사용 (한순간에 프로세스 하나만 사용가능(프린터, 통신망 등))
    + 병행프로세스간의 협력, 동기화 필요
    + 두 프로세스간의 데이터 교환이 필요
    + 동시에 수행하는 다른 프로세스의 실행 속도와 관계 없이 항상 일정한 것만 실행 결과 보장( 결정성 확보)
    + 교착 상태 해결, 병행 프로세스들의 병렬 처리 능력 극대화
    + 실행 검증 문제 해결
    + 병행 프로세스 수행 과정에서 발생하는 상호배제 보장

## 선형 그래프

+ 선형 제약의 논리적 표현
+ 프로세스 : 프로세스 집합과 이것은 선행 제약 두가지 요소로 정의
+ 선행 제약 : 프로세스를 순서대로 다른 상태로 옮기는 것
    + 두 프로세스에 선행 제약이 없으면 이 둘은 독립적으로 병행 실행 가능
+ 순차적 활동을 표현하는 방향성 비순환 그래프
+ 선행 그래프에서 노드는 소프트웨어 작업이나 동시에 실행할 수 있는 프로그램 명령

_
    
    순환 선형 그래프랑 선형 그래프 알아두기

## fork와 join구조

+ 선행 그래프는 연산의 선행 제약 정의에 유용하지만, 2차원이라 프로그램에는 사용 곤란
+ 선행 관계 명시 위해 fork와 join구조, 병행 문장 등 다른 방법 필요
+ 콘웨이(1963년)와 데니스(1966년), 혼(1966년)이 소개
    + fork와 join 두 명령어 사용 최초로 병행을 언어적으로 표현


## fork 명령어

+ 무조건 공부하기
+ fork를 하면 새로운 독립적인 프로세스가 만들어진다

## join 명령어

+ 이것도 무조건 공부한다
+ 병행 연산 2개를 하나로 결합함

공부해야될것

+ fork & join
+ parbegin & parend

## 상호 배제의 개념

+ 병행 프로세스에서 프로세스 하나가 공유 자원 사용시 다른 프로세스들이 동일한 일을 할 수 없도록 하는 방법

+ 읽기 연산은 공유 데이터에 동시에 접근해도 문제 발생 많음

+ 동기화 : 변수나 파일은 프로세스별로 하나씩 차례로 읽거나 쓰도록 해야 하는데, 공유 자원을 동시에 사용하지 못하게 실행을 제어하는 방법을 뜻함.
    + 동기화는 순차적으로 재사용 가능한 자원을 공유하려고 상호작용하는 프로세스 사이에서 나타남
    + 동기화로 상호배제 보장할 수 있지만, 이 과정에서 교착 상태와 기아 상태가 발생할 수 있음
    + 교착상태와 기아 상태는 다음 장에서 배운다

_

    TIP
    우리는 말이다
    상호배제의 개념 = 동기화로 부를 수 있다

임계자원critical resource : 두 프로세스가 동시에 사용할 수 없는 공유 자원

임계영역critical section : 임계 자원에 접근하고 실행하는 프로그램 코드 부분


## 상호 배제의 조건

+ 두 프로세스는 동시에 공유 자원에 진입 불가
+ 프로세스의 속도나 프로세서 수에 영향 받지 않음
+ 공유 자원을 사용하는 프로세스만 다른 프로세스 차단 가능
+ 프로세스가 공유 자원을 사용하려고 너무 오래 기다려서는 안됨

## 원자적인 연산 공부하기