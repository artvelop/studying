# CPU에 대해 알아보자

CPU는 프로세서라고 불리기도 하며 컴퓨터 하드웨어에 부착한 모든 장치의 동작을 제어하고 명령을 실행한다.

![CPU구성](./resource/about_processer.png)

# 레지스터 뽀개버리기

프로세서에 위치한 고속 메모리로 극히 소량의 데이터나 처리중인 중간 결과와도 같은 프로세서가 바로 사용할 수 있는 데이터를 담고 있는 영역

용도에 따라서 사용자 가시 레지스터/ 사용자 불가시 레지스터로 구분된다.


## 사용자 가시 레지스터

사용자가 운영체제와 사용자 프로그램을 이용하여 정보를 변경할 수 있는 레지스터

    데이터 레지스터[DR - Data Register]

         함수 연산에 필요한 데이터를 저장한다.
         산술연산&논리연산에 사용, 연산 결과로 플래그 값을 저장한다.

    주소 레지스터[AR - Address Register]

        기준 주소 레지스터

            프로그램을 실행할 때 사용하는 기준 주소 값

        인덱스 레지스터

            유효 주소를 계산하는데 사용하는 주소 정보를 저장한다.

        스택 포인터 레지스터

            메모리에 프로세서 스택을 구현하는데 사용
            프로세서와 주소 레지스터를 데이터 스택포인터, 큐에 저장한다.
            보통 반환 주소, 프로세서 상태 정보, 서브루틴의 임시 변수를 저장한다.

## 사용자 불가시 레지스터

사용자가 정보를 변경할 수 없는 레지스터로 프로세서의 상태와 제어를 관리

    프로그램 카운터[PC - Program Counter]

        다음에 실행할 명령어의 주소를 보관
        계수기로 되어 있어서 실행할 명령어를 메모리에서 읽으면 명령어의 길이만큼 증가함
        그 후에 다음 명령어를 가리키고 분기 명령어는 목적 주소로 갱신이 가능

    명령어 레지스터[IR - Instruction Register]

        현재 실행하는 명령어를 보관함

    누산기[ACC - ACCumulator]

        데이터를 일시적으로 저장하는 레지스터

    메모리 주소 레지스터[MAR - Memory Adress Register]

        프로세서가 참조하려는 데이터의 주소를 명시
        메모리에 접근하는 버퍼 레지스터

    메모리 버퍼 레지스터[MBR - Memory Buffer Register]

        프로세서가 메모리에서 읽거나 메모리에 저장할 데이터 자체를 보관하는 버퍼 레지스터
        메모리 데이터 레지스터라고도한다.


## 메모리 계층 구조

    속도/가격 : 보조기억장치 < 메인 메모리 < 캐시 < 레지스터

    용랑 : 보조기억장치 > 메인 메모리 > 캐시 > 레지스터

여기서 알아야 할게 있다.

그게 뭐냐면 레지스터, 캐시, 메인 메모리는 프로세서가 프로그램과 데이터에 직접 접근할 수 있는데,

보조기억장치는 프로그램과 데이터를 메인 메모리에 옮겨야 실행할 수 있다.

# 메인 메모리(RAM)

프로세서(CPU)외부에 있고, 프로세서에서 즉각적으로 수행할 프로그램과 데이터를 저장하거나 프로세서에서 처리한 결과를 메인 메모리에 저장한다

주기억장치 또는 1차기억장치라고함  저장 밀도가 높고 가격이 싼 DRAM을 많이 사용한다.

    프로세서 <----> 메인 메모리 <----> 주변장치


    1. 다수의 셀로 구성된다.

    2. 셀 K비트이면 셀은 2의 k승값을 저장할 수 있다.

    3. RAM에 저장할 때는 데이터를 셀에 나눠서 저장한다.

    4. 셀은 주소로 참조하는데 n비트이라면 주소의 범위는 0~2의 n-1승이다.

    5. 메모리 매핑 : 프로그래밍으로 생성된 논리적 주로를 메인메모리에 실제 주소로 옮기는 과정

## 메모리 속도 표현법

메모리 속도는 메모리 접근시간과 메모리 사이클 시간으로 표현이 가능하다.

1. 메모리 접근시간

        명령이 발생한 후 목표 주소를 검색하여 데이터 쓰기(읽기)를 시작할 때까지 걸린 시간
        ex) 읽기 제어 신호를 가한 후 데이터를 메모리 버퍼 레지스터에 저장할 때까지 걸린시간

2. 메모리 사이클 시간

        두 번의 연속적인 메모리 동작 사이에 필요한 최소 지연시간
        ex) 읽기 제어 신호를 가한 후 다음 읽기 제어 신호를 가할 수 있을 때까지 필요한 시간

**보통 사이클 시간이 접근 시간보다 약간 길며, 메모리의 세부 구현 방법에 따라 다르다.


## 알아야할 것

메인 메모리는 프로세서와 보조기억장치 사이에 있으며, 여기에 발생하는 디스크 입출력 병목 현상을 해결하는 역할도 한다.

그런데 프로세서와 메인 메모리 간에 속도 차이가 나면서 메인 메모리의 부담을 줄이려고 프로세서 외부나 내부에 캐시를 구현하기도 한다.

![CPU구성](./resource/add_cache.png)

마치 이렇게 말이다

# 캐시 뽀사버리기

일단 여기서 캐시는 돈이 아니다.

프로세서 내부나 외부에 있으며, 처리 속도가 빠른 프로세서와 상대적으로 느린 메인 메모리의 속도차이를 보완하는 고속 버퍼이다.

